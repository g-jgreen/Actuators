{
    "name": "IFTTTMaker",
    "version": "0.1.0",
    "type": "actuator",
    "script": "if (__.isEmpty(options.requiredProperties.secretKey)) {\n    if (__.isEmpty(options.globalSettings.IFTTTSecretKey)){\n        send(new Error('IP address field is empty and does not exists in global settings'));\n    } else {\n        secretKey = options.globalSettings.IFTTTSecretKey;\n    }\n} else {\n    try {\n        secretKey = waylayUtil.getRawData(options, options.requiredProperties.secretKey);\n    } catch (err) {\n        secretKey = options.requiredProperties.secretKey;\n    }\n}\n\n\n\ntry {\n    eventName = waylayUtil.getRawData(options, options.requiredProperties.eventName);\n} catch (err) {\n    eventName = options.requiredProperties.eventName;\n}\nvar json = {};\ntry {\n    json.value1 = waylayUtil.getRawData(options, options.requiredProperties.value1);\n} catch (err) {\n    json.value1 = options.requiredProperties.value1;\n}\ntry {\n    json.value2 = waylayUtil.getRawData(options, options.requiredProperties.value2);\n} catch (err) {\n    json.value2 = options.requiredProperties.value2;\n}\ntry {\n    json.value3 = waylayUtil.getRawData(options, options.requiredProperties.value3);\n} catch (err) {\n    json.value3 = options.requiredProperties.value3;\n}\n\ntry {\n    var url = 'https://maker.ifttt.com/trigger/'+eventName+'/with/key/'+secretKey;\n    request.post({\n            url : url,\n            headers : {\n                'Accept' : 'application/json',\n                'Content-Type' : 'application/json'\n            },\n            json : json\n    }, function(err, response, body){\n        if (!err) {\n                var value = {rawData : response};\n               send(null, value);\n            } else {\n                send(new Error(err));\n            }\n    }\n    );    \n} catch(err){\n    send(new Error(err));\n}",
    "metadata": {
        "author": "Dan Dan",
        "category": "IFTTT",
        "description": "This actuator sends a POST web request to your IFTTT trigger based on the event name.<br>\nEndpoint: https://maker.ifttt.com/trigger/{event}/with/key/{secretKey}<br><br>\n\n<b>Properties</b><br>\n<ul>\n<li>eventName</li>\n<li>value1,2,3 (optional)</li>\n<li>secretKey (globalsettings, found at https://ifttt.com/maker)</li>\n</ul>",
        "documentationURL": "https://ifttt.com/maker",
        "iconURL": "https://ifttt.com/channels/image/maker?type=variant_small",
        "supportedStates": [],
        "requiredProperties": [
            "eventName",
            "value1",
            "value2",
            "value3",
            "secretKey"
        ],
        "requiredRawData": []
    }
}