{
      "name": "mandrillMail",
      "version": "1.0.1",
      "script": "if(options.globalSettings.MANDRILL_KEY === undefined || options.requiredProperties.message === undefined ||\n    options.requiredProperties.subject === undefined || options.requiredProperties.from === undefined || \n    options.requiredProperties.to === undefined){\n        send(new Error(\"Error missing properties\"));\n    }\nelse {\n    var tagLine = \"\\n\\n\\n -------------------------------\\npowered by waylay.io\";\n    var message = {\n    key: options.globalSettings.MANDRILL_KEY,\n    message: {\n    text: waylayUtil.evaluateData(options, options.requiredProperties.message) + tagLine,\n    subject: waylayUtil.evaluateData(options, options.requiredProperties.subject),\n    from_email: options.requiredProperties.from,\n    from_name: options.requiredProperties.from,\n    to: [\n        {\n            email: options.requiredProperties.to,\n            name: options.requiredProperties.to,\n            type: \"to\"\n        }\n    ],\n    headers: {\n        \"Reply-To\": options.requiredProperties.from\n        }\n    },\n    async: false,\n    ip_pool: \"Main Pool\"\n    };\n          \n    var options = {\n      url: 'https://mandrillapp.com/api/1.0/messages/send.json\"',\n      json: message\n    };\n    \n    request.post(options, function (error, response, body) {\n      if (!error && response.statusCode == 200) {\n        send();\n      }else{\n          send(new Error(\"Error \" + error + \" \" + body));\n      }\n    });\n}\n\n      ",
      "metadata": {
        "author": "",
        "category": "Experimental",
        "description": "Mandrill actuator, based on the REST api\n<h3>Input parameters</h3>\n<ul>\n<li>from</li>\n<li>to</li>\n<li>message</li>\n<li>subject</li>\n</ul>\nYou must provide <strong>MANDRILL_KEY</strong> in the profile settings\n",
        "documentationURL": "https://mandrillapp.com/api/docs/",
        "iconURL": "https://mandrill.com/assets/images/brand/logo-shield-72695847.png",
        "supportedStates": [],
        "requiredProperties": [
          "from",
          "to",
          "message",
          "subject"
        ],
        "requiredRawData": []
      }
    }
