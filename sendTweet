{
    "metadata": {
        "author": "",
        "category": "Social",
        "description": "Send tweet actuator",
        "iconURL": "http://www.wallacehigh.org/wp-content/uploads/2008/12/twitterrific-icon.png",
        "supportedStates": [],
        "requiredProperties": [
            "message"
        ],
        "requiredRawData": []
    },
    "script": "//just to make sure that we don't send the tweet by mistake\nvar OAuthConsumerKey = \"bla\" + options.globalSettings.OAuthConsumerKey;\nvar OAuthConsumerSecret = options.globalSettings.OAuthConsumerSecret;\nvar OAuthAccessToken = options.globalSettings.OAuthAccessToken;\nvar OAuthAccessTokenSecret = options.globalSettings.OAuthAccessTokenSecret;\n\nvar client = new twitter({\n  consumer_key: OAuthConsumerKey,\n  consumer_secret: OAuthConsumerSecret,\n  access_token_key: OAuthAccessToken,\n  access_token_secret: OAuthAccessTokenSecret\n});\n\n\ntry{\n    if(options.requiredProperties.message) {\n    var message = {\n        status: options.requiredProperties.message\n    }\n    try{\n        client.get('statuses/update', message, function(error, tweet, response){\n         if(error) throw error;\n        console.log(tweet);  // Tweet body. \n        console.log(response);  // Raw response object. \n        send();\n        });\n    } catch(err){\n        send(err);\n    }\n    } else {\n         send(new Error(\"Missing message\"));\n    }\n} catch(err){\n    send(new Error(err));\n}\n",
    "name": "sendTweet",
    "version": "0.0.2",
    "type": "actuator"
}
